<form class="block-content form" id="table_form" method="post" action="">
	<hr style="height:0.5em;width:50em;border:1px solid #FB7A31;" />
<%unless @batch_array.empty?%>	
	<%@batch_array.each do |b|%>
	<%batch = Batch.find_by_id(b)%>
	<%=batch.id%>
	<%@day = Weekday.find_all_by_batch_id(batch.id)%>

          <%if @day.empty?%>
           <% @day = Weekday.default%>
          <%end%>
	<p style="font-size: 20px;">
		Title :Timetable For <%= batch.full_name %>
	</p>
	<%@class_timing = ClassTiming.find_all_by_batch_id(batch.id, :conditions => "is_break = false")%>
	<%if @class_timing.empty?%>
      <%@class_timing = ClassTiming.default%>
    <%end%>
	<table id="active-table" class="table gender_all_report no-margin" cellspacing="0" width="100%">
		<thead>
			<tr class="yellow">
				<th scope="col">Day/classtiming </th>
				<% @class_timing.each do |class_time| %>
				 <th scope="col">
				 	 <%= class_time.start_time.strftime('%I:%M %p') %> - <%= class_time.end_time.strftime('%I:%M %p') %>
				  </th>
				<% end %>
			</tr>
		</thead>
		<tbody>
			<%  @day.each do |d| %>
			<tr>
				<td ><%= @weekday[d.weekday.to_i][0,3].upcase %></td>
				<% @class_timing.each do |pt1|  %>
				<% tte = TimetableEntry.find_by_weekday_id_and_class_timing_id_and_batch_id(d.id, pt1.id, batch.id) %>
				<% unless tte.nil? %>
				<% period = tte.subject.nil?? " ":tte.subject.code %>
				<% if SchoolConfiguration.available_modules.include?('HR') %>
				<% teacher = "\n("+tte.employee.full_name+")"    unless tte.employee.nil? %> <td ><%= period %>
				<br/>
				<%= teacher.to_s %></td>
				<% else %> <td ><%= period %></td>
				<% end %>
				<% else %> <td ></td>
				<% end %>
				<% end %>
			</tr>
			<%end%>
		</tbody>
</table>
<%end%>
<%end%>
</form>
<style type="text/css">
	table {
		font: 15px /24px Verdana, Arial, Helvetica, sans-serif;
		border: 1px solid #660000;
		width: 800px;
	}
	th {
		padding: 0 0.5em;
		text-align: left;
	}
	tr.yellow th {
		border-top: 1px solid #FB7A31;
		border-bottom: 1px solid #FB7A31;
		background: #FFC;
	}
	td {
		border-bottom: 1px solid #CCC;
		padding: 0 0.5em;
	}
	td.width {
		width: 190px;
	}
	td.adjacent {
		border-left: 1px solid #CCC;
		text-align: center;
	}
</style>